<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>قارن الأسعار</title>
<style>
body { font-family: Arial, sans-serif; margin:20px; }
input, select, button { padding: 5px; margin:5px; }
img { max-width: 100px; }
.product { border:1px solid #ccc; margin:5px; padding:5px; display:flex; align-items:center; gap:10px;}
</style>
</head>
<body>
<h1>اختر أرخص سعر</h1>
<input id="query" placeholder="اسم المنتج" />
<select id="country">
  <option value="ma">المغرب</option>
  <option value="dz">الجزائر</option>
  <option value="eg">مصر</option>
  <!-- أكمل باقي الدول -->
</select>
<button onclick="search()">بحث</button>

<div id="results"></div>

<script>
async function search(){
  const q = document.getElementById("query").value;
  const country = document.getElementById("country").value;
  const res = await fetch(`/api/search?q=${encodeURIComponent(q)}&country=${country}`);
  const data = await res.json();
  const container = document.getElementById("results");
  container.innerHTML = "";
  data.forEach(p=>{
    const div = document.createElement("div");
    div.className = "product";
    div.innerHTML = `<img src="${p.image}" /><div>
      <strong>${p.title}</strong><br/>
      ${p.price_raw} (${p.store})<br/>
      <a href="${p.link}" target="_blank">شراء من الموقع</a>
    </div>`;
    container.appendChild(div);
  });
}
</script>
</body>
</html>
